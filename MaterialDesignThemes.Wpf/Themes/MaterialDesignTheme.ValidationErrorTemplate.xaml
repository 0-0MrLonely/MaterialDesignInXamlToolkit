<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:wpf="clr-namespace:MaterialDesignThemes.Wpf">

    <ControlTemplate x:Key="MaterialDesignValidationErrorTemplate">
        <StackPanel>
            <AdornedElementPlaceholder Name="Placeholder" />
            <wpf:CustomValidationPopup x:Name="ValidationPopup"
                                       IsOpen="True"
                                       Placement="Bottom" PlacementTarget="{Binding ElementName=Placeholder}"
                                       AllowsTransparency="True">
                <Border Background="{DynamicResource MaterialDesignPaper}">
                    <Border.Resources>
                        <DataTemplate DataType="{x:Type ValidationError}">
                            <TextBlock Foreground="{DynamicResource ValidationErrorBrush}"
                                       FontSize="10"
                                       MaxWidth="250"
                                       Margin="2"
                                       TextWrapping="Wrap"
                                       Text="{Binding ErrorContent}"
                                       UseLayoutRounding="false" />
                        </DataTemplate>
                    </Border.Resources>
                    <ContentPresenter Content="{Binding CurrentItem}" />
                </Border>
            </wpf:CustomValidationPopup>
        </StackPanel>
        <ControlTemplate.Triggers>
            <DataTrigger Binding="{Binding ElementName=Placeholder, Path=AdornedElement.(wpf:ValidationAssist.ShowOnFocus)}" Value="True">
                <Setter TargetName="ValidationPopup" Property="IsOpen" Value="{Binding ElementName=Placeholder, Path=AdornedElement.IsKeyboardFocusWithin, Mode=OneWay}"/>
            </DataTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</ResourceDictionary>